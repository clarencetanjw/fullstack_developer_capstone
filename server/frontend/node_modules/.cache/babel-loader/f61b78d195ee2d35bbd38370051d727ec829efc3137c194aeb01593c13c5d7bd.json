{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import\"./Dealers.css\";import\"../assets/style.css\";import positive_icon from\"../assets/positive.png\";import neutral_icon from\"../assets/neutral.png\";import negative_icon from\"../assets/negative.png\";import review_icon from\"../assets/reviewbutton.png\";import Header from'../Header/Header';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Dealer=()=>{const[dealer,setDealer]=useState({});const[reviews,setReviews]=useState([]);const[unreviewed,setUnreviewed]=useState(false);const[postReview,setPostReview]=useState(/*#__PURE__*/_jsx(_Fragment,{}));let curr_url=window.location.href;let root_url=curr_url.substring(0,curr_url.indexOf(\"dealer\"));let params=useParams();let id=params.id;let dealer_url=root_url+\"djangoapp/dealer/\".concat(id);let reviews_url=root_url+\"djangoapp/reviews/dealer/\".concat(id);let post_review=root_url+\"postreview/\".concat(id);const get_dealer=async()=>{const res=await fetch(dealer_url,{method:\"GET\"});const retobj=await res.json();if(retobj.status===200){let dealerobjs=Array.from(retobj.dealer);setDealer(dealerobjs[0]);}};const get_reviews=async()=>{const res=await fetch(reviews_url,{method:\"GET\"});const retobj=await res.json();if(retobj.status===200){if(retobj.reviews.length>0){setReviews(retobj.reviews);}else{setUnreviewed(true);}}};const senti_icon=sentiment=>{let icon=sentiment===\"positive\"?positive_icon:sentiment===\"negative\"?negative_icon:neutral_icon;return icon;};useEffect(()=>{get_dealer();get_reviews();if(sessionStorage.getItem(\"username\")){setPostReview(/*#__PURE__*/_jsx(\"a\",{href:post_review,children:/*#__PURE__*/_jsx(\"img\",{src:review_icon,style:{width:'10%',marginLeft:'10px',marginTop:'10px'},alt:\"Post Review\"})}));}},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"20px\"},children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"10px\"},children:[/*#__PURE__*/_jsxs(\"h1\",{style:{color:\"grey\"},children:[dealer.full_name,postReview]}),/*#__PURE__*/_jsxs(\"h4\",{style:{color:\"grey\"},children:[dealer['city'],\",\",dealer['address'],\", Zip - \",dealer['zip'],\", \",dealer['state'],\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{class:\"reviews_panel\",children:reviews.length===0&&unreviewed===false?/*#__PURE__*/_jsx(\"text\",{children:\"Loading Reviews....\"}):unreviewed===true?/*#__PURE__*/_jsx(\"div\",{children:\"No reviews yet! \"}):reviews.map(review=>/*#__PURE__*/_jsxs(\"div\",{className:\"review_panel\",children:[/*#__PURE__*/_jsx(\"img\",{src:senti_icon(review.sentiment),className:\"emotion_icon\",alt:\"Sentiment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"review\",children:review.review}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer\",children:[review.name,\" \",review.car_make,\" \",review.car_model,\" \",review.car_year]})]}))})]});};export default Dealer;","map":{"version":3,"names":["React","useState","useEffect","useParams","positive_icon","neutral_icon","negative_icon","review_icon","Header","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","Dealer","dealer","setDealer","reviews","setReviews","unreviewed","setUnreviewed","postReview","setPostReview","curr_url","window","location","href","root_url","substring","indexOf","params","id","dealer_url","concat","reviews_url","post_review","get_dealer","res","fetch","method","retobj","json","status","dealerobjs","Array","from","get_reviews","length","senti_icon","sentiment","icon","sessionStorage","getItem","children","src","style","width","marginLeft","marginTop","alt","margin","color","full_name","class","map","review","className","name","car_make","car_model","car_year"],"sources":["/home/project/fullstack_developer_capstone/server/frontend/src/components/Dealers/Dealer.jsx"],"sourcesContent":["import React, { useState,useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport \"./Dealers.css\";\nimport \"../assets/style.css\";\nimport positive_icon from \"../assets/positive.png\"\nimport neutral_icon from \"../assets/neutral.png\"\nimport negative_icon from \"../assets/negative.png\"\nimport review_icon from \"../assets/reviewbutton.png\"\nimport Header from '../Header/Header';\n\nconst Dealer = () => {\n\n\n  const [dealer, setDealer] = useState({});\n  const [reviews, setReviews] = useState([]);\n  const [unreviewed, setUnreviewed] = useState(false);\n  const [postReview, setPostReview] = useState(<></>)\n\n  let curr_url = window.location.href;\n  let root_url = curr_url.substring(0,curr_url.indexOf(\"dealer\"));\n  let params = useParams();\n  let id =params.id;\n  let dealer_url = root_url+`djangoapp/dealer/${id}`;\n  let reviews_url = root_url+`djangoapp/reviews/dealer/${id}`;\n  let post_review = root_url+`postreview/${id}`;\n  \n  const get_dealer = async ()=>{\n    const res = await fetch(dealer_url, {\n      method: \"GET\"\n    });\n    const retobj = await res.json();\n    \n    if(retobj.status === 200) {\n      let dealerobjs = Array.from(retobj.dealer)\n      setDealer(dealerobjs[0])\n    }\n  }\n\n  const get_reviews = async ()=>{\n    const res = await fetch(reviews_url, {\n      method: \"GET\"\n    });\n    const retobj = await res.json();\n    \n    if(retobj.status === 200) {\n      if(retobj.reviews.length > 0){\n        setReviews(retobj.reviews)\n      } else {\n        setUnreviewed(true);\n      }\n    }\n  }\n\n  const senti_icon = (sentiment)=>{\n    let icon = sentiment === \"positive\"?positive_icon:sentiment===\"negative\"?negative_icon:neutral_icon;\n    return icon;\n  }\n\n  useEffect(() => {\n    get_dealer();\n    get_reviews();\n    if(sessionStorage.getItem(\"username\")) {\n      setPostReview(<a href={post_review}><img src={review_icon} style={{width:'10%',marginLeft:'10px',marginTop:'10px'}} alt='Post Review'/></a>)\n\n      \n    }\n  },[]);  \n\n\nreturn(\n  <div style={{margin:\"20px\"}}>\n      <Header/>\n      <div style={{marginTop:\"10px\"}}>\n      <h1 style={{color:\"grey\"}}>{dealer.full_name}{postReview}</h1>\n      <h4  style={{color:\"grey\"}}>{dealer['city']},{dealer['address']}, Zip - {dealer['zip']}, {dealer['state']} </h4>\n      </div>\n      <div class=\"reviews_panel\">\n      {reviews.length === 0 && unreviewed === false ? (\n        <text>Loading Reviews....</text>\n      ):  unreviewed === true? <div>No reviews yet! </div> :\n      reviews.map(review => (\n        <div className='review_panel'>\n          <img src={senti_icon(review.sentiment)} className=\"emotion_icon\" alt='Sentiment'/>\n          <div className='review'>{review.review}</div>\n          <div className=\"reviewer\">{review.name} {review.car_make} {review.car_model} {review.car_year}</div>\n        </div>\n      ))}\n    </div>  \n  </div>\n)\n}\n\nexport default Dealer\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}